http://www.creator.club.ne.jp/~jagarl/xkanon.html


ホームへ戻る 
--------------------------------------------------------------------------------

xkanon のページ 
xkanon / current : 2007.12.09
ソース( current: 2007.12.09 / gtk2 version current: 2008.1.6 ) 


xkanon は、KEY/VisualArt's 制作の Windows 用ゲーム、KANON を X Window System 上で動かすためのプログラムです。gtk+ 2.6以降、もしくは gtkmm 1.2.0 が動く環境であれば、たいていの UNIX 上で動くはずです。また音楽については FreeBSD と Linux , Solarisで再生可能なはずです。（動作確認はFreeBSD 4.3-RELEASE） 
***って、ようするに、あゆが「うぐぅ！」っていうのをXでも見てみたいなあ、とおもって勢いでつくっちまっただけです。まだまだβ版なんで問題もありますが、見逃してください。
sense off と AIR も問題なく動くようです。


このページはリンクフリーです。URLが変わってリンク切れてもいいなら直リンクも問題ありません。



--------------------------------------------------------------------------------

開発関係 
xkanon のバグ情報の意見交換をはじめ、X Window System 用の Visual Novel のシステム開発全般の情報交換をするためのメーリングリスト xvn-devel を開設しました。詳しくは ここ を見てください。バグ報告、パッチなどは xvn-devel ML にお願いします。
一応 AVG32 のコマンドをまとめてみました。必要ならどうぞ。この情報は無保証であり、また質問などは受け付けません。


作者への苦情、要望、バグ発見などの宛先はこちら。 

jagarl@creator.club.ne.jp
戻る 



--------------------------------------------------------------------------------
ChangeLog
2008/1/8 gtk2版 2-0.3
*細かいバグ取り 
2007/12/16 gtk2版 2-0.2
*細かいバグ取り (thanx to 小松さん)
2007/12/8 gtk2版 2-0.1
*最近の Linux distribution では gtk+-1 系をサポートしなくなったのでgtk+-2 で使用できるようにする
*gtk+-2.6 以降が必要。C の gtk+ base なので gtkmm は必要なくなった
*移植にあたり、小松さんのパッチを参考にさせていただきました。ありがとうございます。
2007/12/8 current 差し替え
*小松さんによる gcc4 用のパッチをマージ
*選択肢に『』がある場合に表示がずれる問題を fix
2005/5/15 current 差し替え
*FreeBSD 5.4-STABLE + gcc 3.3 でコンパイルできるようにする
*浅田＠大阪市さんによる Solaris 関係のパッチを取り込む（部分的）
*北川さんによる esound 関係のパッチそのほかを取り込む　
*小松さんによる alpha 付き png 作成を visarc に追加
2003/4/10 current 差し替え
*「それは舞い散る桜のように」用の画像効果を追加
*同、ファイルシステムの拡張
*画面の下部にテキストスキップなどをするためのボタンをつける
*細々としたバグフィクス
2002/1/7 β２１p1 ということにする。
2001/11/17 β２１のバグをとりつつ差し替えたり
2001/11/16　　　β２１版公開
*雛ちゃん関係のバグ取り(選択肢でもぴよぴよ～)
*選択肢選択の際に esc で前のメッセージに戻るようにする
*TrueType font 使用時に選択肢で文字がずれるのをfix
*テキストウィンドウ上のバックログボタンを実装してみる
*名前入力が可能になった
*gtkmm 関係のバグフィクス(thanx to なおさん)
*マウス関係のバグフィクス(thanx to 遠藤さん)
*SunOS などでの不具合解消(thanx to 市村さん)
*senseoff-drama 関係のパッチ適用(thanx to 木村さん)
*avi 再生をできるようにする
*--cddev none のとき、勝手にbgm を探すようにする
*mp3 / midi 対応
*--pcmrate オプション追加
2001/9/11　　　　snapshotをupdate
*細かいバグ取り。
*AVG32のシナリオ作成のヘルパー作成(senario_write.cc)
*魔薬が落ちないようにする（一応プレイできるが選択が不可能）
*PS2 Linux でXImageのRGB順が逆なのに対応
*マウスのホイールでバックログが見えるようにする
*マウスの中ボタンをWindowsの右ボタンと等価にする
*いくつかのメニュー（バックログ*テキストスキップ関係など）にアクセラレーションキーを割り当てる
2001/8/1　　　　Key に配布許可をいただきました
*配布はGPLで大丈夫ということです
2001/6/25　　　　cvsとか
*cvs で最新版を公開するようにした
*Solaris 用のpcm再生コードをマージ(thanx to 市村さん)
*TrueType font の指定は --ttfont オプションで行うように変更
*画像効果をいろいろ追加(さよならを教えて/好き好き大好きなど用)
*バックログのバグ取り
*デバッグ用に選択肢の自動選択オプションをファイル:システムのメニューを追加
2001/4/13　　　　β２０版公開(xvn-develのみ)
*テストは不十分。音楽はならない可能性大
*原田さんのパッチによりメニューを gettext 化
*テキストスキップで音楽が止まる不具合の解消
*佐佑理シナリオでスタッフロールが化けるバグ取り
*AVG32 for Mac からシナリオスクリプトのコマンドをいくつか追加
*画像が書庫に入っていても読めるようにする
*gameexe.ini から読み込む設定を増やす
*全画面モードでリターンカーソルの形が変わるようにする
*テキストウィンドウの背景色がシナリオスクリプトの要求に応じて変化するようにする
*コンパイル時に指定しなくてもmp3ファイルを cdrom の代わりに再生できるようにする(thanx to 田尻さん)
2000/11/17　　　β１９版公開
*sense off 終了記念というかなんというか。
*バックログまわりのバグとりなど
*libpng を visarc のみリンクするようにする(thanx to 澤田さん)
*sense off 上での不具合修正(thanx to 江洲さん、山口さん)
*Pure Heart 上での不具合修正（thanx to 田尻さん）

2000/10/21　　　β１８版公開(xvn-develのみ)
*バックログを圧縮して保存するようにした。これにともない zlib がコンパイルに必要になる。（なければ圧縮しない）
*バックログ周りのバグ取りたくさん。報告をくださったみなさん、ありがとうございます。
*漢字コンバータ(SJIS->EUC)として xsystem35 の kconv.c を使うのをやめる。半角カナの扱いに問題がある可能性あり。
*wave 出力が遅れるのを減らす 
*画像読み込みを少し高速化 
*田尻さんによる ALSA patch を merge 
*DGA を使えるようにする 

2000/10/14　　　β１７版公開(xvn-develのみ)
*シナリオの巻き戻し*早送りをできるようにした
*wave 出力のデフォルトを 22.05kHz にする。
*半角神奈カナを表示できるようにする(thanx to 中山さん)
*PureHeart に関して、非対応コマンドをとりあえず読めるようにする(thanx to 田尻さん)
*ある状況でテキスト表示の速度が変わるバグを fix

2000/9/26　　　β１６版公開
*今回は安定化リリースです。
*AIR まわりの修正いろいろ。これで完璧なはずです。
*遅いマシン用に usleep をあちこちにいれる
*バグとりいろいろ。gcc の最適化を効くようにしたので、遅いマシンでは高速化されているはずです。

2000/9/13　　　β１５版公開
*AIR に対応する。テキスト既読処理のみ未実装。美凪、佳乃シナリオは完全だと思います。観鈴はまだわかりません。
*sense off の画像効果などに対応。おそらくこれで完全対応。
*いくつかバグとり

2000/9/7　　　β１４版公開
*sense off が動くようになる。いくつか不具合あり（thanx to 山口さん）
*スクロール処理がエンバグしていたので fix （thanx to 山口さん）
*キーボードから選択肢を選べるようにする
*PCM / 画面関係のバグフィクス
*FreeType font を 15,16,24,32 bpp でも使用可能にする
*AIR DEMO のベンチマークを使えるようにする
*PDT11 を読めるようにする
*メニューに「テキスト自動送りモード」を追加

2000/9/3　　　β１３版公開(xvn-develのみ)
*PCM 出力を最大４チャンネルまで合成可能にする。その分、１チャンネルごとの音が小さくなるので KANON の用に１チャンネルしか必要ないゲームについては --no-mixer オプションを付けた方がいい
*それにともない、音声の再生が可能になる。テストは Ribbon2 のオープニングのみ、行っている。なお、効果音の再生が全体的に遅れるようなので注意。
*画像効果周りをいくつか追加。コンプティーク９月号収録の AIR のデモを再生可能にする。
*15bpp, 24bpp, 32bpp を暫定的にサポートまだ、SetMiddleColor24() にバグがある。

2000/8/4　　　β１２版公開
*Ribbon2 に対応するため、かなり大きく変更。ただし、Ribbon2はまだほとんどうごいていない。
*画像効果いくつか対応。AIRのデモはまともになったはず。
*ribbon2の動かし方はREADME参照。

2000/7/25　　　β１１版公開
*小さなバグ取り中心。
*configureスクリプト、Makefileまわりのバグ取り（thanx to なおさん、高木さん）
*終了時にSegmentation fault で落ちるバグをとる（thanx to 田尻さん）
*save/load まわりの処理の一部を AyuWindow->AyuSys に移動
*save file の名前変更。必要に応じて古いファイルをコピーする必要があります。
*KANON の書庫ファイルの操作や画像*マスクの取り出しをする visarc を作成（make visarc でつくる）
*需要がないのでFreeBSD用バイナリの公開をやめる

2000/7/21　　　 AIRデモ用パッチ 公開
*（作者の）現実逃避用。
*AIR のデモを綺麗に見るためのパッチ。 見た目は完璧に近い。画像効果が一つないんだけど。
*KANON では音楽鑑賞モードで問題がでる（カーソルが表示されない）
*まじめにやりゃいいんだけど***うぐぅ、そんなに暇ないよぉ(泣
*当然のことながら、Makefile.in を書きかえてデフォで AIRを再生するようにすること。

2000/7/18　　　β１０版公開
*configure 化に伴い入ったバグをとる（thanx to 田尻さん、澤田さん）
*中山さんによりRibbon2 の音楽用のパッチが提供されたので適用

2000/7/14　　　β９版公開
*configure 化
*終了時に segmentation fault で死ぬバグを修正（thanx to 田尻さん）
*Colorful PUREGIRL ８月号付録の Air デモをだいたい動くようにする
　（未サポートのコマンド、未サポートの画像効果の実装）
*sel4 の重ね合わせ処理のバグ取り

2000/7/5 AIR デモ用パッチ公開
*Colorful PUREGIRL ８月号付録の AIRのデモが、一応最後まで動くようになったので β８へのパッチとして公開。
*現状では、画像効果と画像周りのコマンドに実装されてない物があり、いまいち。
*全年齢版のセーブデータが壊れる可能性があるので注意。
*実行するときは、適当なディレクトリにAIR のデモをコピーし、KANONのデータから pdt/grdat.pdt を AIR の pdt/ にコピーし、
xayusys --version 2 --path [AIRのディレクトリ]
のように実行する。 
2000/6/24　　　β８版公開
*全画面化対応
*澤田さんのパッチにより、TrueType Font に対応する(2000-06-04 版パッチ)
*PCM再生のバグ取り（thanx to 桑形さん）
*画像効果(sel4)のバグ取り（thanx to ごうさん）
*画像読み込みを別thread 化。遅いマシンでも、オープニングの処理落ちがほとんどなくなったはず。
*メモリリークの低減。（mprof を使った結果では、オープニングから佐佑里シナリオを最後までプレイしてメニューから終了した時に、現在200kbyte程度のメモリリーク）

2000/5/28 β７版公開
*gtk-- 1.2.0 base になりました。また、インストールディレクトリが変更になりました。既にインストールしている方は、
　　　ln -s /usr/local/share/kanon /usr/X11R6/share/xkanon
　　　ln -s /usr/local/share/kanon2 /usr/X11R6/share/xkanon-all
と、シンボリックリンクを貼ってください。

*xkanon2 から xkanon-all にコマンド名変更。デフォルトのインストール先も、/usr/local から /usr/X11R6 に変更
*画像処理（重ね合わせ処理）がまともになる。その他、あゆシナリオの最後の方の画像処理のおかしいのを修正。まだ、ちょっとおかしいような気もする。
*menubarがきちんと動くようになる
*セーブデータを壊さないようにまたちょっと改造

2000/5/21 β６版公開
*gtkmm 1.2.0 ベースになる
*menubar はまだ動いてない。
*あれふさんの情報により、テキストウィンドウの位置がまともになる
*初期化ファイルの読み込み周りのバグ修正
*無効なセーブファイルを見つけたら、上書きせず名前をかえて保存するようにする
*gdk_rgb まわりの処理を使わないようにする。
　（shm_at failed がでないようになる）

2000/5/15 β５版公開
田尻 泰弘さんからおくっていただいたパッチを適用する。具体的には
　*Linux で動かすための情報を追加
　*Linux での dirent.h との非互換性の解消
　*ファイルデスクリプタを解放しないバグをフィクス

2000/5/13 β４版公開
*スタッフロールを見れるようにする
*マウスクリックの処理をちょっと変える
*CDROM の処理周りをまた修正
*異常終了時にCDROMのボリュームが０になって うざいので、音楽初期化時にミキサーのＣＤの ボリュームを63にするようにする
*画像処理でおかしいところを修正。
*シナリオのパッチ当てをできるようにする。 いつかは１８禁版*全年齢版の統合パッチをつくりたいなあ。
*なにげにくだらないスクリプトを増やす。うぐぅ。
*gtk のバージョンを1.2.7 にアップ。ということで、 バイナリを動かすには1.2.7のライブラリが必要かも。 どうでもいいけど、最新のgtk--(1.2.0)では、menufactoryが ないせいでコンパイルできないんだよね。だから、stable版の 1.0.3を使わざるを得ない。なのに、FreeBSDのportsから　1.0.3が消えている(;_;)

2000/4/25　　β３版公開
*ゲーム中に見たグラフィックがグラフィックモードで見れるようにする
*CDROM の処理周りを修正。ついでに、fade out もできるようにした（はず）
*subroutine stack のセーブ*ロード処理のおかしいところを修正
*メニューに、「テキストウィンドウを消す」を追加

2000/4/10　β２版公開
*画面の処理でおかしいところを修正。
*おまけのグラフィックモードをきちんと動くようにした。
　（Windows のセーブデータで見たグラフィックスのみ）

2000/3/25　β１版公開
*１８禁版のKANONのセーブデータも読み込み可能にした
*１８禁版のKANONのオープニングで、音楽を連続再生するようにした
*１８禁版と全年齢版、両方インストールするときに、重なるファイルはシンボリック*リンクでインストールするようにした
*一部のシナリオ処理を高速化。処理落ちが少なくなった
*いろいろバグ取り

2000/3/24　β０版公開
*とりあえず動くからいっか、というレベル
